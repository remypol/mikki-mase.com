---
/**
 * Bedroom Boss Sales Page
 * Long-form sales page for the Bedroom Boss ebook
 * Optimized for conversion with social proof, urgency, and transformation sections
 */

import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

// Shop components
import SalesHero from '../components/shop/sales/SalesHero.astro';
import UrgencyBanner from '../components/shop/sales/UrgencyBanner.astro';
import Testimonials from '../components/shop/sales/Testimonials.astro';
import WhoIsThisFor from '../components/shop/sales/WhoIsThisFor.astro';
import TransformationSection from '../components/shop/sales/TransformationSection.astro';
import ChapterList from '../components/shop/sales/ChapterList.tsx';
import PricingCard from '../components/shop/sales/PricingCard.astro';
import PriceJustification from '../components/shop/sales/PriceJustification.astro';
import GuaranteeSeal from '../components/shop/sales/GuaranteeSeal.astro';
import FAQAccordion from '../components/shop/sales/FAQAccordion.tsx';
import StickyBuyBar from '../components/shop/sales/StickyBuyBar.tsx';
import BuyButton from '../components/shop/core/BuyButton.tsx';

// Data
import { bedroomBoss } from '../config/shop/products';
import {
  chapters,
  faqs,
  features,
  painPoints,
  benefits,
  testimonials,
  forYouList,
  notForYouList,
  transformations
} from '../data/bedroom-boss';

const product = bedroomBoss;

// Schema.org Product markup
const productSchema = {
  "@context": "https://schema.org",
  "@type": "Product",
  "name": "Bedroom Boss: The Mikki Mase Playbook",
  "description": "11-chapter ebook on mastering attraction, pleasure, and creating lasting desire.",
  "image": "https://mikki-mase.com/images/shop/bedroom-boss-cover.png",
  "brand": {
    "@type": "Brand",
    "name": "Mikki Mase"
  },
  "offers": {
    "@type": "Offer",
    "price": "47.00",
    "priceCurrency": "USD",
    "availability": "https://schema.org/InStock",
    "priceValidUntil": "2026-12-31"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.9",
    "reviewCount": "147"
  }
};

// FAQ Schema markup for Google rich snippets
const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": faqs.map(faq => ({
    "@type": "Question",
    "name": faq.question,
    "acceptedAnswer": {
      "@type": "Answer",
      "text": faq.answer
    }
  }))
};

// Combined schema
const combinedSchema = [productSchema, faqSchema];
---

<BaseLayout
  title="Bedroom Boss: The Mikki Mase Playbook | Become the Best She's Ever Had"
  description="The playbook decoded from the most talked-about high-roller lifestyle ever lived. 11 chapters on making her crave, obsess, and never forget you. Instant download."
  schema={combinedSchema}
>
  <Header />

  <!-- SECTION 01: HERO -->
  <SalesHero product={product} />

  <!-- SECTION 02: URGENCY BANNER -->
  <UrgencyBanner
    type="price"
    originalPrice={product.compareAt}
    salePrice={product.price}
  />

  <!-- SECTION 03: THE HOOK -->
  <section class="py-16 md:py-24 bg-black">
    <div class="max-w-3xl mx-auto px-4 text-center">
      <p class="text-xl md:text-2xl text-gray-300 leading-relaxed">
        We spent 6 months decoding how
        <span class="text-gold font-semibold"> Mikki Mase</span> operates—at the tables and in the bedroom.
      </p>
      <p class="text-xl md:text-2xl text-gray-300 leading-relaxed mt-6">
        This 184-page playbook is everything we learned,
        <span class="text-gold font-semibold"> broken down step by step.</span>
      </p>
      <p class="text-xl md:text-2xl text-gray-400 leading-relaxed mt-6">
        No theory. No fluff. Just the method.
      </p>
      <p class="text-2xl md:text-3xl text-white font-bold mt-8">
        This is what we found.
      </p>
    </div>
  </section>

  <!-- SECTION 04: THE PROBLEM (more visceral) -->
  <section class="py-16 md:py-24 bg-gray-900">
    <div class="max-w-3xl mx-auto px-4">
      <h2 class="font-serif text-3xl md:text-4xl font-bold text-white text-center mb-4">
        The Truth No One Tells You
      </h2>

      <p class="text-xl text-gray-300 text-center mb-8">
        Right now, there's a guy out there who's average looking, average income, average everything...
        <span class="text-gold font-semibold"> And women are OBSESSED with him.</span>
      </p>

      <p class="text-lg text-gray-400 text-center mb-6">Meanwhile, you're doing everything "right":</p>

      <ul class="space-y-4 max-w-lg mx-auto mb-8">
        {painPoints.map((point) => (
          <li class="flex items-start gap-3 text-lg text-gray-300">
            <svg class="w-6 h-6 text-red-500 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
            {point}
          </li>
        ))}
      </ul>

      <div class="text-center text-gray-300 space-y-4 text-lg">
        <p class="text-gray-400">It's not your fault. No one taught you the real game.</p>
        <p class="text-white font-semibold text-2xl">
          Until now.
        </p>
      </div>
    </div>
  </section>

  <!-- SECTION 05: WHO IS THIS FOR -->
  <WhoIsThisFor forYou={forYouList} notForYou={notForYouList} />

  <!-- SECTION 06: THE PROMISE -->
  <section class="py-16 md:py-24 bg-black">
    <div class="max-w-3xl mx-auto px-4">
      <h2 class="font-serif text-3xl md:text-5xl font-bold text-white text-center mb-4">
        This is Bedroom Boss.
      </h2>
      <p class="text-xl text-gray-400 text-center mb-12">
        The playbook for men who refuse to be forgettable.
      </p>

      <p class="text-lg text-gray-300 text-center mb-8">Inside, you'll learn:</p>

      <ul class="space-y-4 max-w-xl mx-auto mb-12">
        {benefits.map((benefit) => (
          <li class="flex items-start gap-3 text-lg text-gray-200">
            <svg class="w-6 h-6 text-gold flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            {benefit}
          </li>
        ))}
      </ul>

      <p class="text-xl text-gray-300 text-center">
        Once you open it, you don't just change her orgasms—you
        <span class="text-white font-bold"> change her forever.</span>
      </p>
    </div>
  </section>

  <!-- SECTION 07: TRANSFORMATION (30 days from now) -->
  <TransformationSection transformations={transformations} />

  <!-- SECTION 08: CHAPTER BREAKDOWN -->
  <ChapterList client:visible chapters={chapters} />

  <!-- SECTION 09: TESTIMONIALS -->
  <Testimonials testimonials={testimonials} />

  <!-- SECTION 10: WHY THIS IS DIFFERENT -->
  <section class="py-16 md:py-24 bg-gray-900">
    <div class="max-w-3xl mx-auto px-4">
      <h2 class="font-serif text-3xl md:text-4xl font-bold text-white text-center mb-8">
        This isn't theory from some dating coach.
      </h2>

      <p class="text-xl text-gray-300 text-center mb-8">
        This is <span class="text-gold font-semibold">decoded</span> from a man who's lived it.
      </p>

      <div class="bg-gray-800/50 rounded-xl p-6 md:p-8 border border-gray-700 mb-8">
        <p class="text-gray-300 text-lg leading-relaxed mb-4">
          Mikki Mase didn't read about seduction in a book. He didn't watch YouTube videos. He didn't take a course.
        </p>
        <p class="text-gray-300 text-lg leading-relaxed mb-4">
          He built a <span class="text-gold">$32 million fortune</span>, got banned from
          <span class="text-gold"> 150+ casinos</span>, and lived the lifestyle most men only fantasize about.
        </p>
        <p class="text-gray-300 text-lg leading-relaxed">
          Along the way, he figured out something most "experts" never will.
        </p>
      </div>

      <p class="text-xl text-white text-center font-semibold mb-6">
        The same principles that beat the house... work in the bedroom.
      </p>

      <p class="text-lg text-gray-400 text-center">
        Pattern recognition. Emotional control. Knowing when to push. Knowing when to pull back.
      </p>
    </div>
  </section>

  <!-- SECTION 11: AUTHORITY SECTION -->
  <section class="py-20 md:py-24 bg-black">
    <div class="max-w-4xl mx-auto px-4">
      <h2 class="font-serif text-2xl md:text-3xl font-bold text-white text-center mb-10 md:mb-12">
        The Man Behind the Method
      </h2>

      <div class="flex flex-col md:grid md:grid-cols-2 gap-10 md:gap-8 items-center">
        <!-- Image first on mobile -->
        <div class="flex justify-center order-1 md:order-2">
          <img
            src="/images/mikki-main-2.webp"
            alt="Mikki Mase"
            class="w-56 h-56 md:w-80 md:h-80 object-cover rounded-xl border-2 border-gold/30"
            loading="lazy"
          />
        </div>

        <!-- Stats second on mobile -->
        <div class="text-center md:text-left order-2 md:order-1">
          <!-- Stats grid - stacked on mobile -->
          <div class="grid grid-cols-1 gap-4 md:space-y-4 md:block mb-8">
            <div class="flex flex-col md:flex-row items-center md:items-center gap-1 md:gap-3 py-3 md:py-0 border-b border-gray-800 md:border-0">
              <span class="text-gold font-bold text-2xl md:text-lg">$32M+</span>
              <span class="text-gray-300 text-base md:text-lg">in verified winnings</span>
            </div>
            <div class="flex flex-col md:flex-row items-center md:items-center gap-1 md:gap-3 py-3 md:py-0 border-b border-gray-800 md:border-0">
              <span class="text-gold font-bold text-2xl md:text-lg">150+</span>
              <span class="text-gray-300 text-base md:text-lg">casino bans worldwide</span>
            </div>
            <div class="flex flex-col md:flex-row items-center md:items-center gap-1 md:gap-3 py-3 md:py-0">
              <span class="text-gold font-bold text-sm md:text-lg uppercase tracking-wide">Featured in</span>
              <span class="text-gray-300 text-sm md:text-lg">NELK, Bert Kreischer, Soft White Underbelly</span>
            </div>
          </div>

          <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center md:justify-start">
            <a href="/story" class="text-gold hover:text-gold-light underline underline-offset-4 py-2">
              Read His Full Story →
            </a>
            <a href="/banned" class="text-gold hover:text-gold-light underline underline-offset-4 py-2">
              See the Casino Bans →
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- SECTION 12: PRICE JUSTIFICATION -->
  <PriceJustification productPrice={product.price} />

  <!-- SECTION 13: PRICING CARD -->
  <PricingCard product={product} features={features} />

  <!-- SECTION 14: GUARANTEE -->
  <GuaranteeSeal days={30} />

  <!-- SECTION 15: FAQ -->
  <FAQAccordion client:visible faqs={faqs} />

  <!-- SECTION 16: FINAL CTA -->
  <section class="py-16 md:py-24 bg-gradient-to-b from-gray-900 to-black">
    <div class="max-w-3xl mx-auto px-4 text-center">
      <h2 class="font-serif text-3xl md:text-5xl font-bold text-white mb-6">
        Every Night You Wait...
      </h2>

      <p class="text-xl text-gray-300 mb-8">
        She's faking it. She's thinking about someone else. She's wondering if this is as good as it gets.
      </p>

      <p class="text-2xl text-white font-semibold mb-8">
        You can change that tonight.
      </p>

      <BuyButton
        client:load
        productId={product.id}
        productName={product.name}
        price={product.price}
        label="YES, MAKE ME UNFORGETTABLE"
        size="large"
      />

      <!-- Trust badges -->
      <div class="flex flex-wrap justify-center gap-6 mt-8 text-gray-500 text-sm">
        <span class="flex items-center gap-2">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd" />
          </svg>
          Secure checkout
        </span>
        <span class="flex items-center gap-2">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd" />
          </svg>
          Instant access
        </span>
        <span class="flex items-center gap-2">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
          </svg>
          30-day guarantee
        </span>
      </div>
    </div>
  </section>

  <!-- SECTION 17: STICKY BUY BAR -->
  <StickyBuyBar
    client:load
    productId={product.id}
    productName={product.name}
    price={product.price}
    compareAt={product.compareAt}
  />

  <Footer />

  <!-- GA4 Ecommerce: view_item Event -->
  <script is:inline define:vars={{ productId: product.id, productName: product.name, productPrice: product.price }}>
    (function() {
      // Ensure dataLayer and gtag exist
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}

      // Fire view_item immediately - dataLayer queues until GA loads
      gtag('event', 'view_item', {
        currency: 'USD',
        value: productPrice,
        items: [{
          item_id: productId,
          item_name: productName,
          price: productPrice,
          quantity: 1
        }]
      });
      console.log('[GA4] view_item fired:', productId, productPrice);
    })();
  </script>
</BaseLayout>

<style>
  /* Mobile-specific improvements for sales page */
  @media (max-width: 767px) {
    :global(body) {
      /* Extra padding for sticky buy bar */
      padding-bottom: calc(80px + env(safe-area-inset-bottom, 0px)) !important;
    }

    /* Increase line-height for better readability on mobile */
    :global(.text-lg),
    :global(.text-xl) {
      line-height: 1.75 !important;
    }

    :global(.text-gray-300),
    :global(.text-gray-400) {
      line-height: 1.7;
    }

    /* Increase vertical spacing between sections on mobile */
    :global(section.py-16) {
      padding-top: 5rem;
      padding-bottom: 5rem;
    }
  }
</style>

---
/**
 * UrgencyBanner Component
 * Creates urgency with launch special pricing (triple strike-through)
 */

interface Props {
  type?: 'quantity' | 'price';
  originalPrice?: number;
  previousPrice?: number;
  salePrice?: number;
  copiesClaimed?: number;
  totalCopies?: number;
}

const {
  type = 'price',
  originalPrice = 97,
  previousPrice = 47,
  salePrice = 29,
  copiesClaimed = 147,
  totalCopies = 200
} = Astro.props;

const percentClaimed = Math.round((copiesClaimed / totalCopies) * 100);
const savingsPercent = Math.round(((originalPrice - salePrice) / originalPrice) * 100);
---

<div class="bg-gradient-to-r from-[#A8001E]/20 via-[#A8001E]/30 to-[#A8001E]/20 border-y border-[#A8001E]/40">
  <div class="max-w-4xl mx-auto px-4 py-4">

    {type === 'quantity' ? (
      <!-- Quantity-based urgency -->
      <div class="flex flex-col md:flex-row items-center justify-center gap-4 text-center">
        <div class="flex items-center gap-2">
          <span class="text-[#A8001E] animate-pulse">ðŸ”¥</span>
          <span class="text-white font-semibold">
            Only <span class="text-gold">{totalCopies - copiesClaimed}</span> copies left at this price
          </span>
        </div>

        <!-- Progress bar -->
        <div class="w-full max-w-xs">
          <div class="bg-gray-800 rounded-full h-2 overflow-hidden">
            <div
              class="bg-gradient-to-r from-[#A8001E] to-gold h-full rounded-full transition-all duration-500"
              style={`width: ${percentClaimed}%`}
            />
          </div>
          <p class="text-gray-400 text-xs mt-1">{copiesClaimed} claimed</p>
        </div>
      </div>
    ) : (
      <!-- Launch Special pricing with triple strike-through -->
      <div class="flex flex-col sm:flex-row items-center justify-center gap-2 sm:gap-3 text-center">
        <span class="text-[#DC2626] font-semibold text-sm uppercase tracking-wide animate-pulse flex items-center gap-1">
          ðŸ”¥ LAUNCH SPECIAL
        </span>
        <div class="flex items-center gap-2">
          <span class="text-gray-500 line-through text-base sm:text-lg">${originalPrice}</span>
          <span class="text-gray-500 line-through text-base sm:text-lg">${previousPrice}</span>
          <span class="text-gold font-bold text-xl sm:text-2xl">${salePrice}</span>
          <span class="bg-gold text-black text-xs font-bold px-2 py-1 rounded">
            {savingsPercent}% OFF
          </span>
        </div>
      </div>
    )}

  </div>
</div>
